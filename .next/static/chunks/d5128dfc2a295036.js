(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63808,e=>{"use strict";let t=(0,e.i(35694).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],63808)},95776,e=>{"use strict";var t=e.i(93095),s=e.i(61836);function r({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...r})}function a({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...r})}function l({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",e),...r})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...r})}function i({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",e),...r})}e.s(["Card",()=>r,"CardContent",()=>i,"CardDescription",()=>d,"CardHeader",()=>a,"CardTitle",()=>l])},10434,e=>{"use strict";let t=(0,e.i(35694).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],10434)},45340,e=>{"use strict";let t=(0,e.i(35694).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);e.s(["TrendingUp",()=>t],45340)},28679,e=>{"use strict";let t=(0,e.i(35694).default)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);e.s(["ArrowRight",()=>t],28679)},98942,e=>{"use strict";var t=e.i(93095),s=e.i(60709),r=e.i(94296),a=e.i(74778),l=e.i(95776),d=e.i(48642),i=e.i(16073),n=e.i(88508),c=e.i(10434),o=e.i(45340),m=e.i(28679),x=e.i(23824),u=e.i(44977);function h({merchant:e,todayOrders:s,lowStockProducts:r,pendingOrdersCount:a,userEmail:h}){let p=s.reduce((e,t)=>e+Number(t.total_amount),0),j=s.filter(e=>"new"===e.status).length;return e?(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-foreground",children:["Welcome back, ",e.shop_name]}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Here's what's happening with your shop today."})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("span",{className:`px-4 py-2 rounded-full text-sm font-medium ${e.is_open?"bg-[#22C55E]/10 text-[#22C55E] border border-[#22C55E]/20":"bg-muted text-muted-foreground border"}`,children:e.is_open?"Open for orders":"Shop closed"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(g,{title:"Today's Orders",value:s.length.toString(),subtitle:`${j} new`,icon:(0,t.jsx)(i.ShoppingCart,{className:"h-5 w-5"}),iconBg:"bg-[#F97316]/10",iconColor:"text-[#F97316]"}),(0,t.jsx)(g,{title:"Today's Revenue",value:`₹${p.toLocaleString()}`,subtitle:"Total sales",icon:(0,t.jsx)(o.TrendingUp,{className:"h-5 w-5"}),iconBg:"bg-[#22C55E]/10",iconColor:"text-[#22C55E]"}),(0,t.jsx)(g,{title:"Pending Orders",value:a.toString(),subtitle:"Need attention",icon:(0,t.jsx)(n.Package,{className:"h-5 w-5"}),iconBg:"bg-blue-500/10",iconColor:"text-blue-500"}),(0,t.jsx)(g,{title:"Low Stock",value:r.length.toString(),subtitle:"Items below 10",icon:(0,t.jsx)(c.AlertTriangle,{className:"h-5 w-5"}),iconBg:"bg-amber-500/10",iconColor:"text-amber-500",alert:r.length>0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(l.Card,{className:"border-0 shadow-sm rounded-2xl",children:[(0,t.jsx)(l.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l.CardTitle,{className:"text-lg font-semibold",children:"Low Stock Alerts"}),(0,t.jsx)(u.default,{href:"/dashboard/inventory",children:(0,t.jsxs)(d.Button,{variant:"ghost",size:"sm",className:"text-[#F97316] hover:text-[#EA580C] hover:bg-[#F97316]/10",children:["View All",(0,t.jsx)(m.ArrowRight,{className:"ml-1 h-4 w-4"})]})})]})}),(0,t.jsx)(l.CardContent,{children:0===r.length?(0,t.jsxs)("div",{className:"py-8 text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-[#22C55E]/10 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(n.Package,{className:"h-6 w-6 text-[#22C55E]"})}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"All products are well stocked!"})]}):(0,t.jsx)("div",{className:"space-y-3",children:r.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#FDF8F3] rounded-xl",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[e.image_url?(0,t.jsx)("img",{src:e.image_url||"/placeholder.svg",alt:e.name,className:"w-10 h-10 rounded-lg object-cover"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-lg bg-muted flex items-center justify-center",children:(0,t.jsx)(n.Package,{className:"h-5 w-5 text-muted-foreground"})}),(0,t.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,t.jsxs)("span",{className:"text-amber-600 font-semibold text-sm bg-amber-50 px-2 py-1 rounded-lg",children:[e.stock," left"]})]},e.id))})})]}),(0,t.jsxs)(l.Card,{className:"border-0 shadow-sm rounded-2xl",children:[(0,t.jsx)(l.CardHeader,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(l.CardTitle,{className:"text-lg font-semibold",children:"Recent Orders"}),(0,t.jsx)(u.default,{href:"/dashboard/orders",children:(0,t.jsxs)(d.Button,{variant:"ghost",size:"sm",className:"text-[#F97316] hover:text-[#EA580C] hover:bg-[#F97316]/10",children:["View All",(0,t.jsx)(m.ArrowRight,{className:"ml-1 h-4 w-4"})]})})]})}),(0,t.jsx)(l.CardContent,{children:0===s.length?(0,t.jsxs)("div",{className:"py-8 text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-[#F97316]/10 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,t.jsx)(i.ShoppingCart,{className:"h-6 w-6 text-[#F97316]"})}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm",children:"No orders yet today."})]}):(0,t.jsx)("div",{className:"space-y-3",children:s.slice(0,5).map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-[#FDF8F3] rounded-xl",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.customer_name}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.items.length," items • ₹",Number(e.total_amount).toLocaleString()]})]}),(0,t.jsx)(f,{status:e.status})]},e.id))})})]})]})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[60vh] text-center px-4",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-[#F97316]/10 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(x.Store,{className:"h-12 w-12 text-[#F97316]"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-foreground mb-2",children:"Welcome to Samaan!"}),(0,t.jsx)("p",{className:"text-muted-foreground mb-6 max-w-sm",children:"Let's set up your shop profile to start receiving orders from customers nearby."}),(0,t.jsx)(u.default,{href:"/dashboard/profile",children:(0,t.jsxs)(d.Button,{className:"bg-[#F97316] hover:bg-[#EA580C] h-12 px-6 rounded-xl",children:["Set Up Your Shop",(0,t.jsx)(m.ArrowRight,{className:"ml-2 h-4 w-4"})]})})]})}function g({title:e,value:s,subtitle:r,icon:a,iconBg:d,iconColor:i,alert:n=!1}){return(0,t.jsx)(l.Card,{className:`border-0 shadow-sm rounded-2xl ${n?"ring-1 ring-amber-200":""}`,children:(0,t.jsx)(l.CardContent,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e}),(0,t.jsx)("p",{className:"text-2xl font-bold mt-1",children:s}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:r})]}),(0,t.jsx)("div",{className:`p-3 rounded-xl ${d} ${i}`,children:a})]})})})}function f({status:e}){let s={new:"bg-blue-100 text-blue-700",confirmed:"bg-[#F97316]/10 text-[#F97316]",packed:"bg-purple-100 text-purple-700",ready:"bg-[#22C55E]/10 text-[#22C55E]",delivered:"bg-muted text-muted-foreground",cancelled:"bg-destructive/10 text-destructive"};return(0,t.jsx)("span",{className:`px-2.5 py-1 rounded-lg text-xs font-medium capitalize ${s[e]||s.new}`,children:e})}var p=e.i(63808);function j(){let e=(0,r.useRouter)(),[l,d]=(0,s.useState)(!0),[i,n]=(0,s.useState)(null),[c,o]=(0,s.useState)([]),[m,x]=(0,s.useState)([]),[u,g]=(0,s.useState)(0),[f,j]=(0,s.useState)("");return((0,s.useEffect)(()=>{(async()=>{if(!a.authAPI.isAuthenticated())return e.push("/auth/login");let t=a.authAPI.getCurrentUser();if(!t)return e.push("/auth/login");j(t.email||"");try{let e=await a.merchantsAPI.getById(t.id);n(e);let s=await a.ordersAPI.getMerchantOrders(),r=new Date;r.setHours(0,0,0,0);let l=(s||[]).filter(e=>new Date(e.created_at)>=r);o(l);let d=(s||[]).filter(e=>["new","confirmed"].includes(e.status));g(d.length);let i=(await a.productsAPI.getByMerchant(t.id)||[]).filter(e=>e.stock<=10&&e.is_active);x(i)}catch(e){console.error("Error loading dashboard data:",e)}finally{d(!1)}})()},[e]),l)?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,t.jsx)(p.Loader2,{className:"h-8 w-8 animate-spin text-[#F97316]"})}):(0,t.jsx)(h,{merchant:i,todayOrders:c,lowStockProducts:m,pendingOrdersCount:u,userEmail:f})}e.s(["default",()=>j],98942)}]);