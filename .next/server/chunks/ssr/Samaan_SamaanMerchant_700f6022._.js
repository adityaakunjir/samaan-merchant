module.exports=[41996,a=>{"use strict";let b=(0,a.i(37262).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],41996)},68426,a=>{"use strict";var b=a.i(78247);a.s(["Check",()=>b.default])},18807,a=>{"use strict";let b=(0,a.i(37262).default)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);a.s(["Sparkles",()=>b],18807)},17357,a=>{"use strict";var b=a.i(90939),c=a.i(18134);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},1999,a=>{"use strict";let b=(0,a.i(37262).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],1999)},38789,a=>{"use strict";var b=a.i(90939),c=a.i(23984),d=a.i(29939),e=a.i(79590),f=a.i(29287),g=a.i(26920),h=a.i(19246),i=a.i(73388),j=a.i(17357),k=a.i(27244),l=a.i(1797),m=a.i(7757),n=a.i(1999),o=a.i(32799),p=a.i(84659);let q=(0,a.i(37262).default)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var r=a.i(41996),s=a.i(68426),t=a.i(18807),u=a.i(18134);let v=["Dairy","Vegetables","Fruits","Snacks","Beverages","Bakery","Groceries","Personal Care","Household","Other"];function w({merchantId:a,product:w}){let x=!!w,[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)({name:w?.name||"",description:w?.description||"",brand:w?.brand||"",price:w?.price?.toString()||"",mrp:w?.mrp?.toString()||"",unit:w?.unit||"piece",category:w?.category||"",subCategory:w?.subCategory||"",imageUrl:w?.imageUrl||"",stock:w?.stock?.toString()||"",isAvailable:w?.isAvailable??!0}),I=(0,d.useRouter)();(0,c.useEffect)(()=>{F(!0)},[]);let J=async a=>{if(!a.type.startsWith("image/"))return void alert("Please upload an image file");if(a.size>5242880)return void alert("File size must be less than 5MB");B(!0);try{let b=new FileReader;b.onloadend=()=>{H(a=>({...a,imageUrl:b.result})),B(!1)},b.readAsDataURL(a)}catch(a){console.error("Upload error:",a),alert("Failed to upload image"),B(!1)}},K=(0,c.useCallback)(a=>{a.preventDefault(),D(!1);let b=a.dataTransfer.files[0];b&&J(b)},[]),L=async b=>{b.preventDefault(),z(!0);let c={id:w?.id,merchantId:a,name:G.name,description:G.description||null,brand:G.brand||null,price:Number.parseFloat(G.price),mrp:G.mrp?Number.parseFloat(G.mrp):Number.parseFloat(G.price),unit:G.unit||"piece",category:G.category||null,subCategory:G.subCategory||null,imageUrl:G.imageUrl||null,stock:Number.parseInt(G.stock),isAvailable:G.isAvailable};console.log("[v0] Submitting product:",c);try{x&&w?await f.productsAPI.update(w.id,c):await f.productsAPI.create(c),I.push("/merchant/products"),I.refresh()}catch(a){alert(`Failed to save product: ${a.message}`),console.error("[v0] Product save error:",a),z(!1)}};return(0,b.jsxs)("div",{className:(0,u.cn)("transition-opacity duration-500",E?"opacity-100":"opacity-0"),children:[(0,b.jsxs)(e.default,{href:"/merchant/products",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6 text-sm font-medium touch-active",children:[(0,b.jsx)(r.ArrowLeft,{className:"w-4 h-4"}),"Back to Products"]}),(0,b.jsxs)("form",{onSubmit:L,className:"space-y-6",children:[(0,b.jsxs)(l.Card,{className:"p-5 sm:p-6 bg-white rounded-2xl border-0 shadow-sm",children:[(0,b.jsx)(i.Label,{className:"text-base font-semibold text-gray-900 mb-4 block",children:"Product Image"}),(0,b.jsxs)("div",{onDragOver:a=>{a.preventDefault(),D(!0)},onDragLeave:()=>D(!1),onDrop:K,className:(0,u.cn)("border-2 border-dashed rounded-2xl transition-all",C?"border-[#FF7F32] bg-orange-50":"border-gray-200 hover:border-gray-300",G.imageUrl?"p-4":"p-6 sm:p-8"),children:[G.imageUrl?(0,b.jsxs)("div",{className:"relative inline-block mx-auto",children:[(0,b.jsx)("img",{src:G.imageUrl||"/placeholder.svg",alt:"Product",className:"max-w-full max-h-48 sm:max-h-64 rounded-xl object-cover mx-auto"}),(0,b.jsx)("button",{type:"button",onClick:()=>H(a=>({...a,imageUrl:""})),className:"absolute -top-2 -right-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 shadow-lg touch-active",children:(0,b.jsx)(p.X,{className:"w-4 h-4"})})]}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-gray-100 to-gray-50 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(q,{className:"w-8 h-8 text-gray-300"})}),(0,b.jsx)("p",{className:"text-gray-600 mb-3",children:"Drag and drop an image here, or"}),(0,b.jsxs)("label",{children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",className:"rounded-xl bg-white border-gray-200 hover:bg-gray-50 touch-active",asChild:!0,children:(0,b.jsxs)("span",{children:[(0,b.jsx)(n.Upload,{className:"w-4 h-4 mr-2"}),"Browse Files"]})}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>a.target.files?.[0]&&J(a.target.files[0]),className:"sr-only",disabled:A})]}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-3",children:"JPG, PNG up to 5MB"})]}),A&&(0,b.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4 text-[#FF7F32]",children:[(0,b.jsx)(m.Loader2,{className:"w-5 h-5 animate-spin"}),(0,b.jsx)("span",{className:"font-medium",children:"Uploading..."})]})]})]}),(0,b.jsxs)(l.Card,{className:"p-5 sm:p-6 bg-white rounded-2xl border-0 shadow-sm space-y-5",children:[(0,b.jsxs)("h3",{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(o.Package,{className:"w-5 h-5 text-[#FF7F32]"}),"Product Details"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"name",className:"text-gray-700 text-sm font-medium",children:"Product Name *"}),(0,b.jsx)(h.Input,{id:"name",value:G.name,onChange:a=>H(b=>({...b,name:a.target.value})),placeholder:"Enter product name",className:"rounded-xl border-gray-200 h-12 text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"description",className:"text-gray-700 text-sm font-medium",children:"Description"}),(0,b.jsx)(j.Textarea,{id:"description",value:G.description,onChange:a=>H(b=>({...b,description:a.target.value})),placeholder:"Enter product description",className:"rounded-xl border-gray-200 min-h-[100px] text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"price",className:"text-gray-700 text-sm font-medium",children:"Price *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"₹"}),(0,b.jsx)(h.Input,{id:"price",type:"number",min:"0",step:"0.01",value:G.price,onChange:a=>H(b=>({...b,price:a.target.value})),placeholder:"0.00",className:"rounded-xl border-gray-200 h-12 pl-8 text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20",required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"stock",className:"text-gray-700 text-sm font-medium",children:"Stock Qty *"}),(0,b.jsx)(h.Input,{id:"stock",type:"number",min:"0",value:G.stock,onChange:a=>H(b=>({...b,stock:a.target.value})),placeholder:"0",className:"rounded-xl border-gray-200 h-12 text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20",required:!0})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(i.Label,{className:"text-gray-700 text-sm font-medium",children:"Category"}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:v.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>H(b=>({...b,category:a})),className:(0,u.cn)("px-3 py-2 rounded-lg text-sm font-medium transition-all touch-active",G.category===a?"bg-gradient-to-r from-[#FF7F32] to-[#ea580c] text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:a},a))}),(0,b.jsx)(h.Input,{id:"category",value:G.category,onChange:a=>H(b=>({...b,category:a.target.value})),placeholder:"Or type custom category",className:"rounded-xl border-gray-200 h-11 text-sm focus:border-[#FF7F32] focus:ring-[#FF7F32]/20"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"brand",className:"text-gray-700 text-sm font-medium",children:"Brand"}),(0,b.jsx)(h.Input,{id:"brand",value:G.brand,onChange:a=>H(b=>({...b,brand:a.target.value})),placeholder:"Enter brand name",className:"rounded-xl border-gray-200 h-12 text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"mrp",className:"text-gray-700 text-sm font-medium",children:"MRP"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"₹"}),(0,b.jsx)(h.Input,{id:"mrp",type:"number",min:"0",step:"0.01",value:G.mrp,onChange:a=>H(b=>({...b,mrp:a.target.value})),placeholder:"0.00",className:"rounded-xl border-gray-200 h-12 pl-8 text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"unit",className:"text-gray-700 text-sm font-medium",children:"Unit"}),(0,b.jsx)(h.Input,{id:"unit",value:G.unit,onChange:a=>H(b=>({...b,unit:a.target.value})),placeholder:"e.g., kg, piece, liter",className:"rounded-xl border-gray-200 h-12 text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(i.Label,{htmlFor:"subCategory",className:"text-gray-700 text-sm font-medium",children:"Sub Category"}),(0,b.jsx)(h.Input,{id:"subCategory",value:G.subCategory,onChange:a=>H(b=>({...b,subCategory:a.target.value})),placeholder:"Enter sub category",className:"rounded-xl border-gray-200 h-12 text-base focus:border-[#FF7F32] focus:ring-[#FF7F32]/20"})]})]}),(0,b.jsx)(l.Card,{className:(0,u.cn)("p-5 sm:p-6 rounded-2xl border-0 shadow-sm transition-all",G.isAvailable?"bg-gradient-to-br from-green-50 to-white border border-green-100":"bg-white"),children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)("div",{className:(0,u.cn)("w-12 h-12 rounded-xl flex items-center justify-center transition-colors",G.isAvailable?"bg-green-100":"bg-gray-100"),children:G.isAvailable?(0,b.jsx)(t.Sparkles,{className:"w-6 h-6 text-green-600"}):(0,b.jsx)(o.Package,{className:"w-6 h-6 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{className:"text-base font-semibold text-gray-900 block",children:"Product Status"}),(0,b.jsx)("p",{className:(0,u.cn)("text-sm mt-0.5 font-medium",G.isAvailable?"text-green-600":"text-gray-500"),children:G.isAvailable?"Visible to customers":"Hidden from customers"})]})]}),(0,b.jsx)(k.Switch,{checked:G.isAvailable,onCheckedChange:a=>H(b=>({...b,isAvailable:a})),className:"data-[state=checked]:bg-green-500 scale-110"})]})}),(0,b.jsxs)("div",{className:"flex gap-3 sticky bottom-20 lg:bottom-0 bg-[#FDF8F3] py-4 -mx-4 px-4 sm:mx-0 sm:px-0 sm:relative sm:bg-transparent",children:[(0,b.jsx)(g.Button,{type:"button",variant:"outline",className:"flex-1 h-14 rounded-xl bg-white border-gray-200 text-gray-700 font-semibold touch-active",onClick:()=>I.back(),children:"Cancel"}),(0,b.jsx)(g.Button,{type:"submit",disabled:y,className:"flex-1 h-14 bg-gradient-to-r from-[#FF7F32] to-[#ea580c] hover:from-[#ea580c] hover:to-[#d95513] text-white rounded-xl font-semibold shadow-lg shadow-orange-100 touch-active",children:y?(0,b.jsx)(m.Loader2,{className:"w-5 h-5 animate-spin"}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Check,{className:"w-5 h-5 mr-2"}),x?"Save Changes":"Add Product"]})})]})]})]})}a.s(["ProductForm",()=>w],38789)},20697,a=>{"use strict";var b=a.i(90939),c=a.i(23984),d=a.i(29939),e=a.i(29287),f=a.i(38789),g=a.i(7757);function h(){let a=(0,d.useParams)().id,h=(0,d.useRouter)(),[i,j]=(0,c.useState)(!0),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)("");return((0,c.useEffect)(()=>{(async()=>{if(!e.authAPI.isAuthenticated())return h.push("/merchant/login");let b=e.authAPI.getCurrentUser();if(!b)return h.push("/merchant/login");n(b.merchantId);try{let b=await e.productsAPI.getById(a);if(!b)return void(0,d.notFound)();l(b)}catch(a){console.error("Error loading product:",a),(0,d.notFound)()}finally{j(!1)}})()},[a,h]),i)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(g.Loader2,{className:"h-8 w-8 animate-spin text-[#F97316]"})}):k?(0,b.jsxs)("div",{className:"max-w-2xl mx-auto pb-20 lg:pb-0",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Edit Product"}),(0,b.jsx)("p",{className:"text-gray-500 mt-1",children:"Update product details"})]}),(0,b.jsx)(f.ProductForm,{merchantId:m,product:k})]}):(0,d.notFound)()}a.s(["default",()=>h])}];

//# sourceMappingURL=Samaan_SamaanMerchant_700f6022._.js.map