module.exports=[10565,a=>{"use strict";var b=a.i(90939),c=a.i(23984),d=a.i(29939),e=a.i(29287),f=a.i(1797),g=a.i(26920),h=a.i(19246),i=a.i(5985),j=a.i(76376),k=a.i(46059),l=a.i(8938),m=a.i(32799);let n=(0,a.i(37262).default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var o=a.i(8420),p=a.i(31872),q=a.i(73388),r=a.i(17357),s=a.i(27244),t=a.i(96769),u=a.i(7757);function v({userId:a,product:d,onSuccess:f}){let[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(null),[n,o]=(0,c.useState)({name:d?.name||"",description:d?.description||"",price:d?.price?.toString()||"",stock:d?.stock?.toString()||"0",category:d?.category||"",is_active:d?.is_active??!0,image_url:d?.image_url||""}),[p,v]=(0,c.useState)(d?.image_url||null),[w,x]=(0,c.useState)(!1),y=async a=>{let b=a.target.files?.[0];if(b){if(!b.type.startsWith("image/"))return void l("Please select an image file");if(b.size>5242880)return void l("Image must be less than 5MB");x(!0),l(null);try{let a=new FileReader;a.onloadend=()=>{v(a.result),o(b=>({...b,image_url:a.result})),x(!1)},a.readAsDataURL(b)}catch(a){console.error("Upload error:",a),l("Failed to upload image. Please try again."),x(!1)}}},z=async b=>{if(b.preventDefault(),j(!0),l(null),!n.name.trim()){l("Product name is required"),j(!1);return}if(!n.price||0>=Number.parseFloat(n.price)){l("Please enter a valid price"),j(!1);return}try{let b={name:n.name.trim(),description:n.description.trim()||null,price:Number.parseFloat(n.price),stock:Number.parseInt(n.stock)||0,category:n.category.trim()||null,is_active:n.is_active,image_url:n.image_url||null,merchant_id:a};d?await e.productsAPI.update(d.id,b):await e.productsAPI.create(b),f()}catch(a){console.error("Save error:",a),l("Failed to save product. Please try again.")}finally{j(!1)}};return(0,b.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative",children:[p?(0,b.jsx)("img",{src:p||"/placeholder.svg",alt:"Product",className:"w-32 h-32 rounded-xl object-cover border-2 border-muted"}):(0,b.jsx)("div",{className:"w-32 h-32 rounded-xl bg-muted flex items-center justify-center border-2 border-dashed border-muted-foreground/30",children:(0,b.jsx)(m.Package,{className:"h-10 w-10 text-muted-foreground"})}),(0,b.jsxs)("label",{className:"absolute -bottom-2 -right-2 p-2 bg-[#F97316] text-white rounded-full cursor-pointer hover:bg-[#EA580C] transition-colors",children:[(0,b.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:y,disabled:w}),w?(0,b.jsx)(u.Loader2,{className:"h-4 w-4 animate-spin"}):(0,b.jsx)(t.Camera,{className:"h-4 w-4"})]})]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Upload product image (max 5MB)"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(q.Label,{htmlFor:"name",children:"Product Name *"}),(0,b.jsx)(h.Input,{id:"name",value:n.name,onChange:a=>o(b=>({...b,name:a.target.value})),placeholder:"e.g., Basmati Rice 1kg",required:!0,className:"h-11"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(q.Label,{htmlFor:"description",children:"Description"}),(0,b.jsx)(r.Textarea,{id:"description",value:n.description,onChange:a=>o(b=>({...b,description:a.target.value})),placeholder:"Product description...",rows:3})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(q.Label,{htmlFor:"price",children:"Price (₹) *"}),(0,b.jsx)(h.Input,{id:"price",type:"number",step:"0.01",min:"0",value:n.price,onChange:a=>o(b=>({...b,price:a.target.value})),placeholder:"0.00",required:!0,className:"h-11"})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(q.Label,{htmlFor:"stock",children:"Stock Quantity"}),(0,b.jsx)(h.Input,{id:"stock",type:"number",min:"0",value:n.stock,onChange:a=>o(b=>({...b,stock:a.target.value})),placeholder:"0",className:"h-11"})]})]}),(0,b.jsxs)("div",{className:"grid gap-2",children:[(0,b.jsx)(q.Label,{htmlFor:"category",children:"Category"}),(0,b.jsx)(h.Input,{id:"category",value:n.category,onChange:a=>o(b=>({...b,category:a.target.value})),placeholder:"e.g., Groceries, Dairy, Snacks",className:"h-11"})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-muted/50 rounded-lg",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(q.Label,{htmlFor:"is_active",className:"font-medium",children:"Product Status"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:n.is_active?"Product is visible to customers":"Product is hidden"})]}),(0,b.jsx)(s.Switch,{id:"is_active",checked:n.is_active,onCheckedChange:a=>o(b=>({...b,is_active:a}))})]}),k&&(0,b.jsx)("p",{className:"text-sm text-destructive bg-destructive/10 p-3 rounded-lg",children:k}),(0,b.jsx)(g.Button,{type:"submit",className:"w-full h-11 bg-[#F97316] hover:bg-[#EA580C]",disabled:i,children:i?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):d?"Update Product":"Add Product"})]})}function w({products:a,userId:f}){let n=(0,d.useRouter)(),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(!1),[s,t]=(0,c.useState)(null),[u,w]=(0,c.useState)(null),[y,z]=(0,c.useState)(!1),A=a.filter(a=>a.name.toLowerCase().includes(o.toLowerCase())||a.category?.toLowerCase().includes(o.toLowerCase())),B=async()=>{if(u){z(!0);try{await e.productsAPI.delete(u.id),n.refresh()}catch(a){console.error("Delete error:",a)}finally{z(!1),w(null)}}},C=()=>{r(!1),t(null),n.refresh()};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Inventory"}),(0,b.jsxs)("p",{className:"text-muted-foreground",children:[a.length," products in your store"]})]}),(0,b.jsxs)(i.Dialog,{open:q,onOpenChange:r,children:[(0,b.jsx)(i.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(g.Button,{className:"bg-[#F97316] hover:bg-[#EA580C] h-11 rounded-xl",children:[(0,b.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Add Product"]})}),(0,b.jsxs)(i.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto rounded-2xl",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{children:"Add New Product"})}),(0,b.jsx)(v,{userId:f,onSuccess:C})]})]})]}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(l.Search,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-muted-foreground"}),(0,b.jsx)(h.Input,{placeholder:"Search products...",value:o,onChange:a=>p(a.target.value),className:"pl-12 h-12 rounded-xl bg-white border-0 shadow-sm"})]}),0===A.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-[#F97316]/10 rounded-full flex items-center justify-center mb-6",children:(0,b.jsx)(m.Package,{className:"h-10 w-10 text-[#F97316]"})}),(0,b.jsx)("h3",{className:"font-semibold text-lg mb-2",children:"No products yet"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-6 max-w-sm",children:"Add your first product to start selling to customers"}),(0,b.jsxs)(g.Button,{onClick:()=>r(!0),className:"bg-[#F97316] hover:bg-[#EA580C] h-11 rounded-xl",children:[(0,b.jsx)(k.Plus,{className:"mr-2 h-4 w-4"}),"Add Product"]})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:A.map(a=>(0,b.jsx)(x,{product:a,onEdit:()=>t(a),onDelete:()=>w(a)},a.id))}),(0,b.jsx)(i.Dialog,{open:!!s,onOpenChange:a=>!a&&t(null),children:(0,b.jsxs)(i.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto rounded-2xl",children:[(0,b.jsx)(i.DialogHeader,{children:(0,b.jsx)(i.DialogTitle,{children:"Edit Product"})}),s&&(0,b.jsx)(v,{userId:f,product:s,onSuccess:C})]})}),(0,b.jsx)(j.AlertDialog,{open:!!u,onOpenChange:a=>!a&&w(null),children:(0,b.jsxs)(j.AlertDialogContent,{className:"rounded-2xl",children:[(0,b.jsxs)(j.AlertDialogHeader,{children:[(0,b.jsx)(j.AlertDialogTitle,{children:"Delete Product"}),(0,b.jsxs)(j.AlertDialogDescription,{children:['Are you sure you want to delete "',u?.name,'"? This action cannot be undone.']})]}),(0,b.jsxs)(j.AlertDialogFooter,{children:[(0,b.jsx)(j.AlertDialogCancel,{className:"rounded-xl",children:"Cancel"}),(0,b.jsx)(j.AlertDialogAction,{onClick:B,className:"bg-destructive hover:bg-destructive/90 rounded-xl",disabled:y,children:y?"Deleting...":"Delete"})]})]})})]})}function x({product:a,onEdit:c,onDelete:d}){let e=a.stock<=10;return(0,b.jsxs)(f.Card,{className:"overflow-hidden border-0 shadow-sm rounded-2xl bg-white",children:[(0,b.jsxs)("div",{className:"aspect-square relative bg-[#FDF8F3]",children:[a.image_url?(0,b.jsx)("img",{src:a.image_url||"/placeholder.svg",alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,b.jsx)(m.Package,{className:"h-12 w-12 text-muted-foreground/50"})}),!a.is_active&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-white font-medium bg-black/50 px-3 py-1 rounded-lg",children:"Inactive"})}),e&&a.is_active&&(0,b.jsxs)("div",{className:"absolute top-3 right-3 bg-amber-500 text-white px-2.5 py-1 rounded-lg text-xs font-medium flex items-center gap-1",children:[(0,b.jsx)(p.AlertTriangle,{className:"h-3 w-3"}),"Low Stock"]}),(0,b.jsxs)("div",{className:"absolute top-3 left-3 bg-[#22C55E]/90 text-white px-2 py-1 rounded-lg text-xs font-medium",children:[Math.min(Math.round(a.stock/100*100),100),"%"]})]}),(0,b.jsxs)(f.CardContent,{className:"p-4",children:[(0,b.jsxs)("div",{className:"mb-2",children:[(0,b.jsx)("h3",{className:"font-semibold text-sm truncate",children:a.name}),a.category&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.category})]}),(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("span",{className:"text-lg font-bold text-foreground",children:["₹",Number(a.price).toLocaleString()]}),(0,b.jsxs)("span",{className:`text-sm ${e?"text-amber-600 font-medium":"text-muted-foreground"}`,children:[a.stock," in stock"]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{variant:"outline",size:"sm",className:"flex-1 rounded-xl bg-transparent border-[#F97316]/20 text-[#F97316] hover:bg-[#F97316]/10 hover:text-[#F97316]",onClick:c,children:[(0,b.jsx)(n,{className:"h-4 w-4 mr-1"}),"Edit"]}),(0,b.jsx)(g.Button,{variant:"outline",size:"sm",className:"rounded-xl text-destructive hover:text-destructive border-destructive/20 hover:bg-destructive/10 bg-transparent",onClick:d,children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4"})})]})]})]})}function y(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)(!0),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)("");return((0,c.useEffect)(()=>{(async()=>{if(!e.authAPI.isAuthenticated())return a.push("/auth/login");let b=e.authAPI.getCurrentUser();if(!b)return a.push("/auth/login");k(b.id);try{let a=await e.productsAPI.getByMerchant(b.id);i(a||[])}catch(a){console.error("Error loading products:",a)}finally{g(!1)}})()},[a]),f)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,b.jsx)(u.Loader2,{className:"h-8 w-8 animate-spin text-[#F97316]"})}):(0,b.jsx)(w,{products:h,userId:j})}a.s(["default",()=>y],10565)}];

//# sourceMappingURL=Samaan_SamaanMerchant_app_dashboard_inventory_page_tsx_ea5c32fd._.js.map